<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Structure - Learning Aid, an AddOn for World of Warcraft</title>
    <meta name="author" content="Clement Cherlin">
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <header>
      <div class="summary">
        <h2>AddOn Structure</h2>
        <p>What goes into an AddOn, anyway? The answer may surprise you!</p>
      </div>
      <div id="title">
        <h1>Learning Aid</h1>
        <p><i>a <abbr title="User Interface Addition">UI AddOn</abbr> for</i></p>
        <a href="http://www.worldofwarcraft.com/" target="blizzard"><img src="image/WoWlogo_transparency_264x108.png" alt="World of Warcraft" title="World of Warcraft" height="108" width="264" id="wowlogo"></a><p>by Clement Cherlin</p>
      </div>
      <nav><h2>Table of Contents</h2>
        <ol>
          <li><a href="index.html">Introduction</a></li>
          <li><a href="motivation.html">Motivation</a></li>
          <li><a href="evolution.html">Evolution</a></li>
          <li class="youarehere">AddOn Structure</li>
          <li><a href="implementation.html">Implementation</a></li>
        </ol>
      </nav>
    </header>
    <section id="main">
      <aside>
        <h2>Layers Upon Layers</h2>
        <p>Much like how every HTML page is made up of numerous <em>tags</em>, a WoW AddOn contains numerous <em>widgets</em>. The Learning Aid window is made up of a background, a border, a text heading and numerous buttons, each of which contains dozens of even simpler widgets.</p>
        <figure><img src="image/LuaBrowser.png" alt="Screenshot of Lua Browser" width="262" height="536"><figcaption>A <em>partial</em> list of the widgets that make up a single spell button in Learning Aid. Displayed with the assistance of <a href="http://www.curse.com/addons/wow/lua-browser" title="Lua Browser - Development Tools - World of Warcraft Addons - Curse" target="addon">Lua Browser</a>,  an invaluable debugging AddOn.</figcaption></figure>
      </aside>
      <h1>World of Warcraft AddOn Programming Basics</h1>
      <p>Blizzard provides AddOn developers with minimal information. The majority of the documentation accessible by the public has been derived by reading the Lua code included in the game, extracting strings from the game’s executable, and a substantial amount of trial-and-error. You can read more about AddOn development at the fan sites <a href="http://wow.gamepedia.com/Portal:Interface_customization" title="Wowpedia: Portal: Interface customization" target="wiki">Wowpedia</a> and <a href="http://wowprogramming.com/" title="World of Warcraft Programming: A Guide and Reference for Creating WoW Addons">World of Warcraft Programming</a>, among others.</p>
      <p>World of Warcraft AddOns consist of several text files. Every AddOn has a <a href="http://wow.gamepedia.com/TOC_format" target="wiki">“Table of Contents”</a> or <code>.toc</code> file that gives the AddOn’s name, provides a bit of information about it, specifies what version of the game the AddOn is compatible with, and lists the Lua and/or XML files in the AddOn’s subdirectory that the game should load. When the player runs World of Warcraft, the game opens each toc file and reads the list of Lua and/or XML files into memory.</p>
      <p>When a player logs in to a game character, WoW refers to its list of AddOns and associated files. WoW opens each Lua or XML file one at a time, reads the contents into memory, and converts the human-readable text into binary representations of user-interface widgets, Lua functions, and data. At this time, each AddOn sets up the functions, data and UI widgets(link) that it will use later; loads any saved information from previous game sessions; registers its event handling functions, and the list of events it needs to be notified of.</p>
      <h2>Widgets and Events</h2>
      <p>World of Warcraft has an <em><a href="https://en.wikipedia.org/wiki/Event-driven_programming" target="wiki">event-driven</a> graphical user interface</em>. In the built-in WoW UI and user-created AddOns, windows, buttons, sliders and text input boxes, known as <em>widgets</em>, each have a list of <em>events</em> associated with them. Lua scripts included with the game and each AddOn <em>register</em> their interest in these events, and Lua functions to call when those events occur. After the game engine <a href="https://en.wikipedia.org/wiki/3D_rendering" title="Wikipedia: 3D rendering" target="wiki">renders the 3D world</a>, but before it displays the finished image on the screen, it generates a list of events. Each event represents some change in the state of the game, like a character gaining or losing hit points, the player logging in or out, receiving a <em><a href="http://wow.gamepedia.com/Chat" title="Wowpedia: Chat" target="wiki">chat message</a></em>, etc. The game calls these <em>event handler</em> functions to notify interested widgets that an event they are <em>listening for</em> has occurred. The event handlers then take whatever action is appropriate: they may adjust the state of buttons, update text and graphical indicators, show or hide themselves or other widgets, start or stop playing sounds, etc.</p>
    </section>
    <footer>
      <p>©2015 Clement Cherlin. Created for Web Development Fundamentals - C376 at <a href="http://www.wgu.edu/">Western Governors University</a>.</p>
    </footer>
  </body>
</html>
